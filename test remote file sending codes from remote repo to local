import React, { useEffect, useRef } from "react";
import anime from "animejs";

export default function GitHistoryAnimated() {
  const logoRef = useRef(null);
  const timelineRef = useRef(null);

  useEffect(() => {
    // Logo pulse and rotate
    anime({
      targets: logoRef.current,
      scale: [0.9, 1.05],
      rotate: ["-6deg", "6deg"],
      easing: "easeInOutSine",
      duration: 1200,
      direction: "alternate",
      loop: true,
    });

    // Staggered timeline reveal
    anime({
      targets: timelineRef.current.querySelectorAll(".event"),
      translateY: [20, 0],
      opacity: [0, 1],
      delay: anime.stagger(180),
      easing: "spring(1, 80, 10, 0)",
      duration: 800,
    });

    // Small floating circles background
    anime({
      targets: ".float",
      translateY: [0, -18],
      opacity: [0.6, 0.12],
      loop: true,
      direction: "alternate",
      easing: "easeInOutSine",
      delay: anime.stagger(120, { start: 200 }),
      duration: 2400,
    });
  }, []);

  const historyText = `In early 2005 the Linux kernel project faced a painful choice after proprietary source-control tooling strained community workflows and licensing. Linus Torvalds — already known for creating the Linux kernel — set out to build a new tool tailored to the kernel’s needs: fast performance on large trees, strong integrity guarantees, and a distributed model that encouraged many contributors to work offline and merge often.

Git’s initial design emphasized snapshots rather than incremental patches, storing content in a content-addressed object database (originally using SHA-1). This approach made it cheap to branch and merge because branches were simply lightweight references to commits instead of heavy, centralised constructs. Local commits enabled developers to work without network access, while later syncing operations exchanged only objects that the remote didn’t already have, making collaboration efficient.

Adoption spread quickly among open-source projects because Git solved real pain points: it was fast, reliable, and supported non-linear development at scale. Its early days included intense iteration on commands and workflows, with contributors building tooling, GUIs, and documentation to improve usability.

A pivotal moment arrived in 2008 when GitHub combined Git with a web-based social layer: pull requests, forking, and inline code review. That social model made collaboration intuitive, lowered entry barriers, and accelerated the formation of a massive ecosystem of public and private repositories.

Throughout the 2010s, Git matured into an enterprise-grade platform. Hosting providers, continuous integration systems, and project-management integrations turned Git into the backbone of modern DevOps. Companies introduced managed services, permissions models, and large-scale mirrors to support enterprise requirements.

In recent years, Git has continued to evolve: the community has addressed security concerns around SHA-1 by migrating toward stronger hashing, performance improvements for very large repos have been prioritized, and richer tooling has made workflows more discoverable. Today Git is not just a version control system; it’s an ecosystem that enables distributed collaboration, transparent history, and reproducible development — the foundation of how most software is built worldwide.`;

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-slate-100 p-6">
      <div className="max-w-5xl mx-auto">
        <header className="flex items-center gap-4 mb-6">
          <div
            ref={logoRef}
            className="w-20 h-20 rounded-2xl flex items-center justify-center text-2xl font-extrabold bg-gradient-to-tr from-indigo-600 to-teal-400 shadow-2xl"
            aria-hidden
          >
            GIT
          </div>
          <div>
            <h1 className="text-3xl font-semibold">The History of Git — Animated</h1>
            <p className="text-slate-400 mt-1">An interactive, animated retelling of how Git changed software collaboration.</p>
          </div>
        </header>

        {/* Floating decorative bubbles */}
        <div aria-hidden className="relative mb-4">
          <div className="absolute -left-6 -top-10 w-32 h-32 rounded-full bg-white/6 blur-xl float" />
          <div className="absolute right-0 -top-6 w-24 h-24 rounded-full bg-cyan-400/6 blur-xl float" />
          <div className="absolute left-36 top-4 w-16 h-16 rounded-full bg-indigo-500/6 blur-xl float" />
        </div>

        <main className="grid md:grid-cols-3 gap-6 items-start">
          <section className="md:col-span-2 bg-slate-800/40 p-6 rounded-2xl backdrop-blur-sm border border-white/6 shadow-xl">
            <article>
              <p className="text-slate-200 leading-relaxed" style={{ textAlign: "justify" }}>
                {historyText}
              </p>
            </article>

            <div className="mt-6" ref={timelineRef}>
              <div className="space-y-4">
                <div className="event p-4 rounded-lg bg-gradient-to-r from-white/3 to-transparent border border-white/6">
                  <h3 className="text-lg font-semibold">2005 — Birth of Git</h3>
                  <p className="text-sm text-slate-400 mt-1">Created by Linus Torvalds as a fast, distributed VCS after licensing issues with previous tooling.</p>
                </div>

                <div className="event p-4 rounded-lg bg-gradient-to-r from-white/3 to-transparent border border-white/6">
                  <h3 className="text-lg font-semibold">2005–2007 — Community Growth</h3>
                  <p className="text-sm text-slate-400 mt-1">Rapid adoption by open-source projects and tooling improvements lowered the learning curve.</p>
                </div>

                <div className="event p-4 rounded-lg bg-gradient-to-r from-white/3 to-transparent border border-white/6">
                  <h3 className="text-lg font-semibold">2008 — GitHub & Social Workflows</h3>
                  <p className="text-sm text-slate-400 mt-1">GitHub introduced pull requests and forking, making distributed collaboration mainstream.</p>
                </div>

                <div className="event p-4 rounded-lg bg-gradient-to-r from-white/3 to-transparent border border-white/6">
                  <h3 className="text-lg font-semibold">2010s — Maturation</h3>
                  <p className="text-sm text-slate-400 mt-1">Enterprise hosting, CI/CD, and GUI tools made Git central to modern development.</p>
                </div>

                <div className="event p-4 rounded-lg bg-gradient-to-r from-white/3 to-transparent border border-white/6">
                  <h3 className="text-lg font-semibold">Today — Scale & Security</h3>
                  <p className="text-sm text-slate-400 mt-1">Ongoing improvements around hashing, performance, and usability keep Git relevant at scale.</p>
                </div>
              </div>
            </div>
          </section>

          <aside className="hidden md:block p-4 rounded-2xl bg-slate-800/30 border border-white/4 shadow-inner">
            <h4 className="font-semibold">Quick Facts</h4>
            <ul className="mt-3 text-sm text-slate-300 space-y-2">
              <li>Created: April 2005</li>
              <li>Creator: Linus Torvalds</li>
              <li>First big web host: GitHub (2008)</li>
              <li>Model: Distributed, snapshot-based</li>
            </ul>

            <div className="mt-4">
              <button
                onClick={() => {
                  // small interactive burst
                  anime({
                    targets: ".event",
                    scale: [1, 1.02, 1],
                    duration: 600,
                    easing: "easeOutBack",
                    delay: anime.stagger(80),
                  });
                }}
                className="px-3 py-2 rounded-md bg-emerald-500/90 text-black font-medium"
              >
                Animate Timeline
              </button>
            </div>
          </aside>
        </main>

        <footer className="text-center text-slate-400 mt-8">
          <small>Made with ❤️ • Animated with anime.js • Built as a React component</small>
        </footer>
      </div>
    </div>
  );
}
